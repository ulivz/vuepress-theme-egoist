---
title: æ–°ä¸–çºªç¦éŸ³è„šæ‰‹æ¶
subtitle: she said, "it's futuristic."
date: 2017-05-21 20:20:34
tags:
---
å¥½çš„ä½œå“ä¸åœ¨äºå…¶å½¢å¼ï¼Œé‡è¦çš„æ˜¯å†…å®¹ï¼Œæˆ‘çš„å¾ˆå¤šéŸ³ä¹ä½œå“éƒ½æ˜¯æ²¡æœ‰åå­—çš„ï¼Œç„¶è€Œæ²¡æœ‰åå­—çš„ä¸œè¥¿æ— æ³•å•†ä¸šæµé€šï¼Œæ‰€ä»¥ä½ æ‰ä¼šçœ‹åˆ°æˆ‘é‚£äº›æ²¡æœ‰ç‰¹æ®Šæ„ä¹‰ã€å•çº¯é æ»šé”®ç›˜å¾—åˆ°çš„åå­—ã€‚ â€”â€” [æ³½é‡å¼˜ä¹‹](http://music.163.com/#/artist?id=15290)æ›¾ç»è¿™æ ·è¯´è¿‡(å…¶å®å¹¶æ²¡æœ‰)ã€‚

è¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯è¿™ä¸ªé“ç†ï¼Œæƒ³ä»‹ç»ä¸€ä¸‹æˆ‘åœ¨åŠå¹´å‰å¼€å§‹åšçš„è„šæ‰‹æ¶å·¥å…·ã€‚ç»™æ–‡ç« èµ·æ ‡é¢˜ä¹Ÿæ˜¯ä¸€ä»¶å¾ˆå›°éš¾çš„äº‹ï¼Œæœ€å¼€å§‹æƒ³åˆ°çš„æ˜¯ã€Œå²ä¸Šæœ€ä¼˜é›…çš„è„šæ‰‹æ¶å·¥å…·ã€ã€ã€Œæ¥è‡ªæœªæ¥çš„è„šæ‰‹æ¶ã€ï¼Œä¸è¿‡è¿™äº›æœªå…æ˜¾å¾—å¤ªæ ‡é¢˜å…šäº†ï¼Œåè€Œä¸å®æˆ‘è‡ªå·±éƒ½å¾ˆå°´å°¬ã€‚æœ€è¿‘æˆ‘åˆšå¥½åšäº†ä¸ª[æ–°ä¸–çºªç¦éŸ³æˆ˜å£«æ ‡é¢˜å¡ç”Ÿæˆå™¨](https://github.com/egoist/evangelion-card)ï¼Œäºæ˜¯å°±éšæœºå°†å‡ ä¸ªå…³é”®è¯ç»„åˆåœ¨ä¸€èµ· â€”â€” **æ–°ä¸–çºªç¦éŸ³è„šæ‰‹æ¶**ï¼Œæ„å¤–åœ°æ˜¾å¾—è¿˜ä¸é”™ã€‚

![sao](https://ooo.0o0.ooo/2017/05/21/5921898822cae.png)

**ä¸ºäº†ä¸è®©ä½ å¯¹æ ‡é¢˜ä¸æ˜æ‰€ä»¥ï¼Œç®€å•åœ°è¯´æ˜äº†å®ƒçš„æ¥å†ï¼Œä»¥ä¸‹æ‰æ˜¯æ­£æ–‡ã€‚**

## è„šæ‰‹æ¶

ç»å¸¸é€ è½®å­å°±ä¼šå‘ç°è„šæ‰‹æ¶çš„é‡è¦æ€§ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ Yeoman çš„å‘æ˜è€…ä¹‹ä¸€æ˜¯ [@sindresorhus](https://github.com/sindresorhus) çš„åŸå› ã€‚åè€…å·²ç»åœ¨ npm ä¸Šå‘å¸ƒäº†[è¶…è¿‡ 1000 ä¸ªæ¨¡å—](https://www.npmjs.com/~sindresorhus)ï¼Œå¾ˆéš¾åæœ‰æ¥è€…äº†ã€‚

Yeoman ååˆ†å¥å£®ï¼Œç”Ÿæ€ç¹è£ï¼Œç„¶è€Œè¦å†™[ä¸€ä¸ª generator çš„å¤æ‚åº¦](https://github.com/sindresorhus/generator-nm/blob/master/app/index.js)å’Œå†™æ™®é€šçš„ä»£ç å‡ ä¹æ˜¯å·®ä¸å¤šçš„ï¼Œè€Œæˆ‘åœ¨èƒ½å°½å¯èƒ½å‡å°‘æ€è€ƒçš„æ—¶å€™å°±æƒ³å‡å°‘æ€è€ƒï¼Œvue-cli çš„æ€è·¯å¾ˆå¥½åœ°è§£å†³äº†æˆ‘æƒ³å‡å°‘æ€è€ƒçš„è¯‰æ±‚ï¼Œä¸€ä¸ª generator ä¸­é—´ç”Ÿæˆæ–‡ä»¶çš„è¿‡ç¨‹æœ‰å¾ˆå¤šæ­¥éª¤æ˜¯å¯ä»¥è‡ªåŠ¨è§£å†³çš„ã€‚

vue-cli è™½ç„¶åå­—é‡Œæœ‰ vue å±æ€§ï¼Œä½†æ˜¯ä½œä¸ºä»»æ„ç±»å‹é¡¹ç›®çš„è„šæ‰‹æ¶å·¥å…·éƒ½æ˜¯å¯ä»¥çš„ï¼Œå°½ç®¡è¿è¡Œ `vue init react` è¿™æ ·çš„å‘½ä»¤ä¼šæ˜¾å¾—æœ‰äº›å¥‡æ€ªã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘åšäº† [SAO](https://github.com/egoist/sao) çš„åŸå› ï¼Œä¸€ä¸ªç±»ä¼¼ vue-cli çš„è„šæ‰‹æ¶å·¥å…·ã€‚åœ¨æ‹¥æœ‰ vue-cli çš„åŠŸèƒ½çš„åŒæ—¶ï¼Œå®ƒä¹Ÿèƒ½åƒ Yeoman ä¸€æ ·ç”¨ npm package ä½œä¸ºæ¨¡æ¿å¹¶æ”¯æŒæµ‹è¯•ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨è¿è¡Œ `sao vue` çš„æ—¶å€™ï¼Œå¦‚æœ template-vue è¿™ä¸ª npm æ¨¡å—æ²¡æœ‰å…¨å±€å®‰è£…ï¼Œå®ƒä¼šæç¤ºä½ å®‰è£…ï¼Œä¹‹åå†ä½¿ç”¨æ¨¡æ¿æ ¹ç›®å½•é‡Œçš„é…ç½®æ–‡ä»¶ `sao.js` å°†åŒç›®å½•é‡Œçš„ `template/` ä¸­çš„æ–‡ä»¶ç”Ÿæˆåˆ° `process.cwd()` å³å½“å‰ç›®å½•ã€‚å¦‚æœä¸å­˜åœ¨é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆåªä¼šå½“æˆä¸€ä¸ªæ™®é€šçš„ç›®å½•ï¼Œç®€å•åœ°å¤åˆ¶ç²˜è´´åˆ°å½“å‰ç›®å½•ã€‚

ğŸ“„ **template-vue/sao.js:**

```js
module.exports = {
  // ä»ç”¨æˆ·è·å–ä¸€äº›ä¿¡æ¯
  prompts: {
    pwa: {
      type: 'confirm',
      message: 'Add Progressive Web App support',
      default: true
    }
  },
  // å¦‚æœè¦å‘å¸ƒåˆ° npm
  // .gitignore ä¼šè‡ªåŠ¨è¢« npm æ›´åä¸º .npmignore
  // ä¸ºäº†é¿å…è¿™ç§æƒ…å†µéœ€è¦èµ·ä¸ªå¦å¤–çš„åå­—
  // ç„¶ååœ¨ç”Ÿæˆçš„æ—¶å€™æ”¹åä¸º .gitignore
  move: {
    gitignore: '.gitignore'
  },
  // åªåœ¨ç”¨æˆ·ç¡®è®¤äº† pwa é€‰é¡¹çš„æ—¶å€™ç”Ÿæˆ pwa.js
  filters: {
    'pwa.js': 'pwa'
  }
}
```

ä¸Šé¢çš„è¿™ä¸ªé…ç½®æ–‡ä»¶æ»¡è¶³äº†å¤§éƒ¨åˆ†è„šæ‰‹æ¶çš„éœ€æ±‚ï¼Œå³ä»ç”¨æˆ·è·å–ä¿¡æ¯ --> æ ¹æ®æ­¤ä¿¡æ¯ç”Ÿæˆéœ€è¦çš„æ–‡ä»¶ã€‚è€Œä¸”å‡ ä¹ä¸ä»£ç æ— å…³ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶å®Œå…¨æ˜¯ç”±**æ•°æ®**ç»„æˆçš„ï¼Œåªä¸è¿‡åˆšå¥½æ˜¯ä»¥ JS å¯¹è±¡çš„æ ¼å¼ã€‚

![preview](https://ooo.0o0.ooo/2017/05/21/59218de93485b.png)

SAO æ¥æ”¶çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯:

- æœ¬åœ°æ¨¡æ¿è·¯å¾„ï¼Œæ¯”å¦‚ `./my-template` `/path/to/my-template`ã€‚
- GitHub é¡¹ç›®ç¼©ç•¥åï¼Œæ¯”å¦‚ `egoist/template-vue`ã€‚
- npm æ¨¡å—å(è‡ªåŠ¨åŠ ä¸Š `template-` å‰ç¼€)ï¼Œæ¯”å¦‚ `vue` å°†ä¼šä½¿ç”¨ npm ä¸Šçš„ `template-vue` è¿™ä¸ªåŒ…ã€‚

è€Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œä¸å­˜åœ¨æ—¶å°†ä¼šç”Ÿæˆæ–‡ä»¶åˆ°å·¥ä½œåŒºç›®å½•ï¼ˆå½“å‰ç›®å½•ï¼‰ï¼Œå¦åˆ™å°†ä¼šç”Ÿæˆåˆ°æŒ‡å®šçš„æ–‡ä»¶å¤¹ä¸­ã€‚

## æµ‹è¯•è„šæ‰‹æ¶

å½“è„šæ‰‹æ¶å˜å¾—å¤æ‚ï¼Œä½ éœ€è¦ç³»ç»Ÿåœ°æµ‹è¯•ä»¥ä¾¿è®©å…¶åœ¨å„ç§æƒ…å†µä¸‹éƒ½èƒ½ç”Ÿæˆæ­£ç¡®çš„æ–‡ä»¶ã€‚å¯¹äºä¸€ä¸ªè„šæ‰‹æ¶ï¼Œèƒ½ä»ç”¨æˆ·å½±å“åˆ°å®ƒçš„å˜é‡åªæœ‰ `prompts` è¿™ä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯ä»ç”¨æˆ·è·å–çš„ä¿¡æ¯ã€‚è€Œ SAO çš„æµ‹è¯•ä¹Ÿä¸»è¦æ˜¯å›´ç»•è¿™ä¸ªæ¥çš„ï¼Œä½ å¯ä»¥æ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥æ¥æ£€æµ‹ç”Ÿæˆç»“æœã€‚

ğŸ“„ **template-vue/test.js:**

```js
import test from 'ava'
import sao from 'sao'

test('generate pwa entry', async t => {
  const template = process.cwd() // æ¨¡æ¿æ ¹ç›®å½•
  const res = await sao.mockPrompt(template, {
    // æ¨¡æ‹Ÿçš„ prompts æ•°æ®
    // é»˜è®¤ä½¿ç”¨ `prompts` ä¸­çš„é»˜è®¤å€¼
    // åœ¨ä¸Šé¢çš„ `sao.js` ä¸­ `pwa` é»˜è®¤ä¸º `true`
  })
  t.true(res.fileList.includes('pwa.js'))
})

test('ignore pwa entry', async t => {
  const template = process.cwd() // æ¨¡æ¿æ ¹ç›®å½•
  const res = await sao.mockPrompt(template, {
    pwa: false
  })
  t.false(res.fileList.includes('pwa.js'))
})
```

è¿™é‡Œçš„ `res.fileList` æ˜¯ç”Ÿæˆçš„æ–‡ä»¶åˆ—è¡¨ï¼Œå½¢å¦‚:

```js
[
  '.gitignore',
  'pwa.js',
  'src/index.js'
]
```

ä»¥åŠ `res.files`ï¼ŒåŒ…å«äº†ç”Ÿæˆæ–‡ä»¶çš„ä¿¡æ¯:

```js
{
  '.gitignore': {
    contents: Buffer,
    stats: {}, // fs.Stats,
    path: '/absolute/path/to/this/file'
  },
  // ...
}
```

## æœ€å

åˆ†äº«å‡ ä¸ªæˆ‘è‡ªå·±ç»å¸¸ä½¿ç”¨çš„æ¨¡æ¿:

- [template-nm](https://github.com/egoist/template-nm): ç”Ÿæˆä¸€ä¸ª npm æ¨¡å—ï¼Œæˆ‘çš„æ‰€æœ‰æ¨¡å—éƒ½æ˜¯ç”¨è¿™ä¸ªç”Ÿæˆçš„ã€‚
- [template-vue](https://github.com/egoist/template-vue): ç”Ÿæˆä¸€ä¸ª*å‡ ä¹*æ— éœ€é…ç½®çš„ Vue é¡¹ç›®ï¼ŒåŸºäº [Poi](https://poi.js.org)ã€‚
- [awesome-sao](https://github.com/egoist/awesome-sao): ç›¸å…³ SAO èµ„æºã€‚

å…³äºæ›´å¤š SAO çš„ä½¿ç”¨æ–¹æ³•å’Œé…ç½®æ–‡ä»¶å‚æ•°ï¼Œå¯ä»¥è®¿é—® https://sao.js.org :P è™½ç„¶æœ¬æ–‡æ ‡é¢˜æ˜¯æ¥æºäºæ–°ä¸–çºªç¦éŸ³æˆ˜å£«ï¼Œä½† SAO æ˜¾ç„¶æ˜¯æ¥æºäº [Sword Art Online](https://zh.moegirl.org/zh-hans/%E5%88%80%E5%89%91%E7%A5%9E%E5%9F%9F) çš„ã€‚